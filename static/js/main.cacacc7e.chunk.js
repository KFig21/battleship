(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{14:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),c=a(8),s=a.n(c),n=a(3),u=a(2),i=(a(7),a(1));var l=function(){return Object(i.jsx)("header",{children:Object(i.jsx)("span",{className:"header-game-name",children:"Battleship"})})},d=function(e){var t=e.board,a=e.coords,r=e.placeShip,o=e.switchPlayer,c=e.currentPlayer,s=e.gameStarted,u=e.handleHover,l=e.isHovering,d=void 0===l?[]:l,h=e.cpuIsHovering,p=void 0===h?[]:h,f=e.cpuShips,b=e.setText,m=e.cpuBoard,j=e.setCpuBoard,v=e.gameOver,y=e.gameWon,g=document.getElementById("notification"),O="square";d&&(O+=d.includes(a)?" hover-ship":""),p&&(O+=p.includes(a)?" hover-aim":"");var S=function(){if("Computer"===t){if(m.includes(a))return;j((function(e){return[].concat(Object(n.a)(e),[a])}));for(var e=0;e<f.length;e++)for(var r=0;r<f[e].coords.length;r++)if(f[e].coords[r]===a){if(document.getElementById("".concat(t,"-").concat(a)).style.backgroundColor="var(--alertRed)",f[e].health--,b("Attack Status: HIT! [".concat(a,"]")),g.style.color="var(--successGreen)",0===f[e].health){f[e].status="sunk",b("Attack Status: HIT! you sunk their ".concat(f[e].shipId,"!")),g.style.color="var(--successGreen)";for(var c=0;c<f[e].size;c++)document.getElementById("".concat(t,"-").concat(f[e].coords[c])).style.backgroundColor="darkred"}return f.every((function(e){return"sunk"===e.status}))&&v("Player"),void o()}b("Attack Status: MISS! [".concat(a,"]")),g.style.color="var(--primary-light)",document.getElementById("".concat(t,"-").concat(a)).style.backgroundColor="var(--miss)",o()}};return Object(i.jsx)("div",{className:"grid-square ".concat(t," ").concat(O),onClick:function(e){return function(e){y||"Computer"!==c&&(s||"Player"!==t||(e.preventDefault(),r(a)),"Computer"===t&&(e.preventDefault(),S()))}(e)},onMouseEnter:function(){if("Player"===t){if(!u)return;u(a)}else if("Computer"===t){if(!u)return;u(a)}},id:"".concat(t,"-").concat(a)})};var h=function(e){var t=e.player,a=e.switchPlayer,r=e.currentPlayer,o=e.gameStarted,c=e.shipToPlace,s=e.onHover,n=e.isHovering,u=e.placeShip,l=e.cpuIsHovering,h=e.cpuShips,p=e.setText,f=e.cpuBoard,b=e.setCpuBoard,m=e.gameOver,j=e.gameWon;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("span",{className:"board-name",children:[t,"'s board"]}),Object(i.jsx)("div",{className:"game-board ".concat(t,"-board"),children:function(){for(var e=[],v=0;v<10;v++)for(var y=0;y<10;y++)"Player"===t?e.push(Object(i.jsx)(d,{board:t,coords:y+10*v,placeShip:u,switchPlayer:a,currentPlayer:r,gameStarted:o,shipToPlace:c,handleHover:s,isHovering:n,gameWon:j},"".concat(y," ").concat(v))):"Computer"===t&&e.push(Object(i.jsx)(d,{board:t,coords:y+10*v,placeShip:u,switchPlayer:a,currentPlayer:r,gameStarted:o,shipToPlace:c,handleHover:s,cpuIsHovering:l,cpuShips:h,setText:p,setCpuBoard:b,cpuBoard:f,gameOver:m,gameWon:j},"".concat(y," ").concat(v)));return e}()})]})},p=[{size:5,shipId:"Carrier",className:"Carrier",key:0,coords:[],health:5,status:"deployed"},{size:4,shipId:"Battleship",className:"Battleship",key:1,coords:[],health:4,status:"deployed"},{size:3,shipId:"Destroyer",className:"Destroyer",key:2,coords:[],health:3,status:"deployed"},{size:3,shipId:"Submarine",className:"Submarine",key:3,coords:[],health:3,status:"deployed"},{size:2,shipId:"Patroler",className:"Patroler",key:4,coords:[],health:2,status:"deployed"}],f=[{size:5,shipId:"Carrier",className:"Carrier",key:0,coords:[],health:5,status:"deployed"},{size:4,shipId:"Battleship",className:"Battleship",key:1,coords:[],health:4,status:"deployed"},{size:3,shipId:"Destroyer",className:"Destroyer",key:2,coords:[],health:3,status:"deployed"},{size:3,shipId:"Submarine",className:"Submarine",key:3,coords:[],health:3,status:"deployed"},{size:2,shipId:"Patroler",className:"Patroler",key:4,coords:[],health:2,status:"deployed"}],b=function(e){var t=e.turn,a=e.text;return Object(i.jsxs)("div",{className:"notification-container",children:[Object(i.jsx)("span",{className:"notification",id:"notification",children:a}),Object(i.jsxs)("span",{className:"header-turn-count",children:["Turn: ",t]})]})};var m=function(){var e=Object(r.useState)(0),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)("Player"),s=Object(u.a)(c,2),d=s[0],m=s[1],j=Object(r.useState)(!1),v=Object(u.a)(j,2),y=v[0],g=v[1],O=Object(r.useState)(!1),S=Object(u.a)(O,2),I=S[0],P=S[1],k=Object(r.useState)(!1),C=Object(u.a)(k,2),x=C[0],B=C[1],N=Object(r.useState)([]),M=Object(u.a)(N,2),H=M[0],T=M[1],z=Object(r.useState)(0),E=Object(u.a)(z,2),w=E[0],A=E[1],R=Object(r.useState)(p[w]),W=Object(u.a)(R,2),D=W[0],G=W[1],V=Object(r.useState)([]),q=Object(u.a)(V,2),J=q[0],L=q[1],U=Object(r.useState)([]),Y=Object(u.a)(U,2),F=Y[0],K=Y[1],Q=Object(r.useState)(!1),X=Object(u.a)(Q,2),Z=X[0],$=X[1],_=Object(r.useState)([]),ee=Object(u.a)(_,2),te=ee[0],ae=ee[1],re=Object(r.useState)(0),oe=Object(u.a)(re,2),ce=oe[0],se=oe[1],ne=Object(r.useState)(f[ce]),ue=Object(u.a)(ne,2),ie=ue[0],le=ue[1],de=Object(r.useState)([]),he=Object(u.a)(de,2),pe=he[0],fe=he[1],be=Object(r.useState)([]),me=Object(u.a)(be,2),je=me[0],ve=me[1],ye=Object(r.useState)(!1),ge=Object(u.a)(ye,2),Oe=ge[0],Se=ge[1],Ie=Object(r.useState)([]),Pe=Object(u.a)(Ie,2),ke=Pe[0],Ce=Pe[1],xe=Object(r.useState)("Place your ".concat(D.shipId,"!")),Be=Object(u.a)(xe,2),Ne=Be[0],Me=Be[1],He=Object(r.useState)(!1),Te=Object(u.a)(He,2),ze=Te[0],Ee=Te[1],we=Object(r.useState)("Vertical"),Ae=Object(u.a)(we,2),Re=Ae[0],We=Ae[1],De=document.getElementById("notification"),Ge=function(){m("Player"===d?"Computer":"Player"),o((function(e){return e+1}))};Object(r.useEffect)((function(){I||"Computer"===d&&setTimeout((function(){return Ve()}),2e3)}),[d]);var Ve=function(){if(!I){var e="";if(Oe){if(Oe){var t=Ue();if(t.length>0){var a=Math.floor(Math.random()*t.length);for(e=t[a];F.includes(e)&&t.length>0;)t.splice(a,1),a=Math.floor(Math.random()*t.length),e=t[a],0===t.length&&(e=Je())}else{var r=Le(ke),o=Math.floor(Math.random()*r.length);for(e=r[o];F.includes(e);)o=Math.floor(Math.random()*r.length),e=r[o]}}}else e=Je();console.log("attack: "+e),K((function(t){return[].concat(Object(n.a)(t),[e])}));for(var c=0;c<H.length;c++)for(var s=0;s<H[c].coords.length;s++)if(H[c].coords[s]===e){if(document.getElementById("Player-".concat(e)).style.backgroundColor="var(--alertRed)",H[c].health--,Me("Attack Status: You've been HIT! [".concat(e,"]")),De.style.color="var(--alertRed)",Ce((function(t){return[].concat(Object(n.a)(t),[e])})),console.log("adding targets: "+e),Se(!0),0===H[c].health){H[c].status="sunk",Me("Attack Status: HIT! They sunk your ".concat(H[c].shipId,"!")),De.style.color="var(--alertRed)",qe(H[c]);for(var u=0;u<H[c].size;u++)document.getElementById("Player-".concat(H[c].coords[u])).style.backgroundColor="darkred"}return H.every((function(e){return"sunk"===e.status}))&&Xe("Computer"),void Ge()}Me("Attack Status: CPU MISS! [".concat(e,"]")),De.style.color="var(--primary-light)",document.getElementById("Player-".concat(e)).style.backgroundColor="var(--miss)",Ge()}},qe=function(e){console.log("check if on target: "+e.shipId);for(var t=ke,a=0;a<e.coords.length;a++)if(t.includes(e.coords[a])){var r=ke.indexOf(e.coords[a]);t.splice(r,1),console.log("removing targets: "+e.coords[a]),console.log("leftover targets: "+t)}Ce(t),0===ke.length&&(Se(!1),Ce([]))},Je=function(){for(var e=Math.floor(100*Math.random());F.includes(e);)e=Math.floor(100*Math.random());return e},Le=function(e){console.log("targetvalue in getTargets: "+ke);for(var t=[],a=0;a<e.length;a++)0===e[a]?(t.push(1),t.push(10)):99===e[a]?(t.push(89),t.push(98)):9===e[a]?(t.push(8),t.push(19)):90===e[a]?(t.push(80),t.push(91)):e[a]<9?(t.push(e[a]-1),t.push(e[a]+1),t.push(e[a]+10)):e[a]>90?(t.push(e[a]-1),t.push(e[a]+1),t.push(e[a]-10)):e%10===0?(t.push(e[a]+1),t.push(e[a]-10),t.push(e[a]+10)):e[a]+1===0?(t.push(e[a]-1),t.push(e[a]-10),t.push(e[a]+10)):(t.push(e[a]-1),t.push(e[a]+1),t.push(e[a]-10),t.push(e[a]+10));return t.every((function(e){return F.includes(e)}))&&(t=Je()),t},Ue=function(){if(ke.length<2)return[];for(var e=[],t=0;t<ke.length;t++)for(var a=0;a<ke.length;a++)ke[t]===ke[a]+1&&(ke[t]+1!==0&&e.push(ke[t]+1),ke[a]%10!==0&&e.push(ke[a]-1)),ke[t]===ke[a]+10&&(ke[t]+10<100&&e.push(ke[t]+10),ke[a]-10>=0&&e.push(ke[a]-10));return console.log("preferredTargets: "+e),e},Ye=function(){y&&!I?B(!0):I&&Ze()},Fe=function(e,t){var a=e[0],r=e[e.length-1];if(r>=100||a%10>r%10)return!1;for(var o="Player"===t?H:te,c=function(t){if(o.some((function(a){return a.coords.includes(e[t])})))return{v:!1}},s=0;s<e.length;s++){var n=c(s);if("object"===typeof n)return n.v}return!0};Object(r.useEffect)((function(){x||(w<5?(G(p[w]),Me("Place your ".concat(D.shipId,"!"))):(B(!0),L([]),Me("Launch an attack!")))})),Object(r.useEffect)((function(){x&&!Z&&(te.length<=5?(le(f[ce]),Qe()):$(!0))}));var Ke=function(){Qe()},Qe=function(){for(var e=ie,t=Math.floor(98*Math.random()),a=[1,10][Math.floor(2*Math.random())],r=[t],o=1;o<ie.size;o++)r.push(t+o*a);Fe(r,"Computer")?(ae((function(t){return[].concat(Object(n.a)(t),[e])})),e.coords=r,se((function(e){return parseInt(e+1)}))):Ke()},Xe=function(e){Me("Game over! ".concat(e," wins!")),"Computer"===e&&(De.style.color="var(--alertRed)"),P(!0)},Ze=function(){window.location.reload(),De.style.color="var(--primary-light)"};return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(l,{}),Object(i.jsx)(b,{turn:a,startGame:Ye,text:Ne,shipToPlace:D}),Object(i.jsxs)("div",{className:"boards-container",children:[Object(i.jsx)(h,{player:"Player",switchPlayer:Ge,currentPlayer:d,gameStarted:x,setBoardReady:g,setGameWon:P,shipToPlace:D,setShipToPlace:G,onHover:function(e){if(!x){var t=D,a=[e],r=ze?10:1;if(ze)for(var o=1;o<t.size;o++)a.push(parseInt(e)+parseInt(o*r));else for(var c=1;c<t.size&&(e+c)%10!==0;c++)a.push(parseInt(e)+parseInt(c*r));L(a)}},isHovering:J,placeShip:function(e){for(var t=D,a=ze?10:1,r=[e],o=1;o<t.size;o++)r.push(parseInt(e)+parseInt(o*a));if(Fe(r,"Player")){T((function(e){return[].concat(Object(n.a)(e),[t])})),t.coords=r;for(var c=0;c<r.length;c++){var s=r[c];document.getElementById("Player-".concat(s)).style.backgroundColor="var(--ship)"}A((function(e){return parseInt(e+1)}))}}}),x&&Object(i.jsx)(h,{player:"Computer",switchPlayer:Ge,currentPlayer:d,gameStarted:x,setBoardReady:g,setGameWon:P,cpuIsHovering:pe,onHover:function(e){Z&&fe([e])},cpuShips:te,setText:Me,setCpuBoard:ve,cpuBoard:je,gameOver:Xe,gameWon:I})]}),Object(i.jsxs)("div",{className:"lower-container",children:[!x&&Object(i.jsxs)("button",{className:"orientation-button",onClick:function(){We("Vertical"===Re?"Horizontal":"Vertical"),Ee(!1===ze)},children:["Set ",Re]}),I&&Object(i.jsx)("button",{className:"orientation-button",onClick:Ye,children:"Play Again"})]})]})};s.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(m,{})}),document.getElementById("root"))},7:function(e,t,a){}},[[14,1,2]]]);
//# sourceMappingURL=main.cacacc7e.chunk.js.map