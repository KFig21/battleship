(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{14:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),c=a(8),s=a.n(c),n=a(3),u=a(2),l=(a(7),a(1));var i=function(){return Object(l.jsx)("header",{children:Object(l.jsx)("span",{className:"header-game-name",children:"Battleship"})})},d=function(e){var t=e.board,a=e.coords,r=e.placeShip,o=e.switchPlayer,c=e.currentPlayer,s=e.gameStarted,u=e.handleHover,i=e.isHovering,d=void 0===i?[]:i,h=e.cpuIsHovering,p=void 0===h?[]:h,f=e.cpuShips,b=e.setText,m=e.cpuBoard,v=e.setCpuBoard,j=e.gameOver,y=e.gameWon,g=document.getElementById("notification"),O="square";d&&(O+=d.includes(a)?" hover-ship":""),p&&(O+=p.includes(a)?" hover-aim":"");var S=function(){if("Computer"===t){if(m.includes(a))return;v((function(e){return[].concat(Object(n.a)(e),[a])}));for(var e=0;e<f.length;e++)for(var r=0;r<f[e].coords.length;r++)if(f[e].coords[r]===a){if(document.getElementById("".concat(t,"-").concat(a)).style.backgroundColor="var(--alertRed)",f[e].health--,b("Attack Status: HIT! [".concat(a,"]")),g.style.color="var(--successGreen)",0===f[e].health){f[e].status="sunk",b("Attack Status: HIT! you sunk their ".concat(f[e].shipId,"!")),g.style.color="var(--successGreen)";for(var c=0;c<f[e].size;c++)document.getElementById("".concat(t,"-").concat(f[e].coords[c])).style.backgroundColor="darkred"}return f.every((function(e){return"sunk"===e.status}))&&j("Player"),void o()}b("Attack Status: MISS! [".concat(a,"]")),g.style.color="var(--primary-light)",document.getElementById("".concat(t,"-").concat(a)).style.backgroundColor="var(--miss)",o()}};return Object(l.jsx)("div",{className:"grid-square ".concat(t," ").concat(O),onClick:function(e){return function(e){y||"Computer"!==c&&(s||"Player"!==t||(e.preventDefault(),r(a)),"Computer"===t&&(e.preventDefault(),S()))}(e)},onMouseEnter:function(){if("Player"===t){if(!u)return;u(a)}else if("Computer"===t){if(!u)return;u(a)}},id:"".concat(t,"-").concat(a)})};var h=function(e){var t=e.player,a=e.switchPlayer,r=e.currentPlayer,o=e.gameStarted,c=e.shipToPlace,s=e.onHover,n=e.isHovering,u=e.placeShip,i=e.cpuIsHovering,h=e.cpuShips,p=e.setText,f=e.cpuBoard,b=e.setCpuBoard,m=e.gameOver,v=e.gameWon;return Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{className:"board-name",children:[t,"'s board"]}),Object(l.jsx)("div",{className:"game-board ".concat(t,"-board"),children:function(){for(var e=[],j=0;j<10;j++)for(var y=0;y<10;y++)"Player"===t?e.push(Object(l.jsx)(d,{board:t,coords:y+10*j,placeShip:u,switchPlayer:a,currentPlayer:r,gameStarted:o,shipToPlace:c,handleHover:s,isHovering:n,gameWon:v},"".concat(y," ").concat(j))):"Computer"===t&&e.push(Object(l.jsx)(d,{board:t,coords:y+10*j,placeShip:u,switchPlayer:a,currentPlayer:r,gameStarted:o,shipToPlace:c,handleHover:s,cpuIsHovering:i,cpuShips:h,setText:p,setCpuBoard:b,cpuBoard:f,gameOver:m,gameWon:v},"".concat(y," ").concat(j)));return e}()})]})},p=[{size:5,shipId:"Carrier",className:"Carrier",key:0,coords:[],health:5,status:"deployed"},{size:4,shipId:"Battleship",className:"Battleship",key:1,coords:[],health:4,status:"deployed"},{size:3,shipId:"Destroyer",className:"Destroyer",key:2,coords:[],health:3,status:"deployed"},{size:3,shipId:"Submarine",className:"Submarine",key:3,coords:[],health:3,status:"deployed"},{size:2,shipId:"Patroler",className:"Patroler",key:4,coords:[],health:2,status:"deployed"}],f=[{size:5,shipId:"Carrier",className:"Carrier",key:0,coords:[],health:5,status:"deployed"},{size:4,shipId:"Battleship",className:"Battleship",key:1,coords:[],health:4,status:"deployed"},{size:3,shipId:"Destroyer",className:"Destroyer",key:2,coords:[],health:3,status:"deployed"},{size:3,shipId:"Submarine",className:"Submarine",key:3,coords:[],health:3,status:"deployed"},{size:2,shipId:"Patroler",className:"Patroler",key:4,coords:[],health:2,status:"deployed"}],b=function(e){var t=e.turn,a=e.text;return Object(l.jsxs)("div",{className:"notification-container",children:[Object(l.jsx)("span",{className:"notification",id:"notification",children:a}),Object(l.jsxs)("span",{className:"header-turn-count",children:["Turn: ",t]})]})};var m=function(){var e=Object(r.useState)(0),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)("Player"),s=Object(u.a)(c,2),d=s[0],m=s[1],v=Object(r.useState)(!1),j=Object(u.a)(v,2),y=j[0],g=j[1],O=Object(r.useState)(!1),S=Object(u.a)(O,2),I=S[0],k=S[1],P=Object(r.useState)(!1),x=Object(u.a)(P,2),C=x[0],B=x[1],M=Object(r.useState)([]),N=Object(u.a)(M,2),T=N[0],H=N[1],z=Object(r.useState)(0),E=Object(u.a)(z,2),w=E[0],A=E[1],R=Object(r.useState)(p[w]),W=Object(u.a)(R,2),D=W[0],G=W[1],V=Object(r.useState)([]),q=Object(u.a)(V,2),J=q[0],L=q[1],U=Object(r.useState)([]),Y=Object(u.a)(U,2),F=Y[0],K=Y[1],Q=Object(r.useState)(!1),X=Object(u.a)(Q,2),Z=X[0],$=X[1],_=Object(r.useState)([]),ee=Object(u.a)(_,2),te=ee[0],ae=ee[1],re=Object(r.useState)(0),oe=Object(u.a)(re,2),ce=oe[0],se=oe[1],ne=Object(r.useState)(f[ce]),ue=Object(u.a)(ne,2),le=ue[0],ie=ue[1],de=Object(r.useState)([]),he=Object(u.a)(de,2),pe=he[0],fe=he[1],be=Object(r.useState)([]),me=Object(u.a)(be,2),ve=me[0],je=me[1],ye=Object(r.useState)(!1),ge=Object(u.a)(ye,2),Oe=ge[0],Se=ge[1],Ie=Object(r.useState)([]),ke=Object(u.a)(Ie,2),Pe=ke[0],xe=ke[1],Ce=Object(r.useState)("Place your ".concat(D.shipId,"!")),Be=Object(u.a)(Ce,2),Me=Be[0],Ne=Be[1],Te=Object(r.useState)(!1),He=Object(u.a)(Te,2),ze=He[0],Ee=He[1],we=Object(r.useState)("Vertical"),Ae=Object(u.a)(we,2),Re=Ae[0],We=Ae[1],De=document.getElementById("notification"),Ge=function(){m("Player"===d?"Computer":"Player"),o((function(e){return e+1}))};Object(r.useEffect)((function(){I||"Computer"===d&&setTimeout((function(){return Ve()}),2e3)}),[d]);var Ve=function(){if(!I){var e="";if(console.log("onTarget",Oe),Oe){if(Oe){var t=Ue();if(t.length>0){var a=Math.floor(Math.random()*t.length);for(e=t[a];F.includes(e)&&t.length>0;)if(t.splice(a,1),a=Math.floor(Math.random()*t.length),e=t[a],Oe&&void 0===e){console.log("Player boats have been stacked next to each other, keep firing on adjacent targets!");var r=Le(Pe),o=Math.floor(Math.random()*r.length);for(e=r[o];F.includes(e);)o=Math.floor(Math.random()*r.length),e=r[o]}}else{var c=Le(Pe),s=Math.floor(Math.random()*c.length);for(e=c[s];F.includes(e);)s=Math.floor(Math.random()*c.length),e=c[s]}}}else e=Je();console.log("attack: "+e),console.log("----------------"),K((function(t){return[].concat(Object(n.a)(t),[e])}));for(var u=0;u<T.length;u++)for(var l=0;l<T[u].coords.length;l++)if(T[u].coords[l]===e){if(document.getElementById("Player-".concat(e)).style.backgroundColor="var(--alertRed)",T[u].health--,Ne("Attack Status: You've been HIT! [".concat(e,"]")),De.style.color="var(--alertRed)",xe((function(t){return[].concat(Object(n.a)(t),[e])})),console.log("adding targets: "+e),Se(!0),0===T[u].health){T[u].status="sunk",Ne("Attack Status: HIT! They sunk your ".concat(T[u].shipId,"!")),De.style.color="var(--alertRed)",qe(T[u]);for(var i=0;i<T[u].size;i++)document.getElementById("Player-".concat(T[u].coords[i])).style.backgroundColor="darkred"}return T.every((function(e){return"sunk"===e.status}))&&Xe("Computer"),void Ge()}Ne("Attack Status: CPU MISS! [".concat(e,"]")),De.style.color="var(--primary-light)",document.getElementById("Player-".concat(e)).style.backgroundColor="var(--miss)",Ge()}},qe=function(e){console.log("check if on target: "+e.shipId);for(var t=Pe,a=0;a<e.coords.length;a++)if(t.includes(e.coords[a])){var r=Pe.indexOf(e.coords[a]);t.splice(r,1),console.log("removing targets: "+e.coords[a]),console.log("leftover targets: "+t)}xe(t),0===Pe.length&&(Se(!1),xe([]))},Je=function(){for(var e=Math.floor(100*Math.random());F.includes(e);)e=Math.floor(100*Math.random());return e},Le=function(e){console.log("targetvalue in getTargets: "+Pe);for(var t=[],a=0;a<e.length;a++)0===e[a]?(t.push(1),t.push(10)):99===e[a]?(t.push(89),t.push(98)):9===e[a]?(t.push(8),t.push(19)):90===e[a]?(t.push(80),t.push(91)):e[a]<9?(t.push(e[a]-1),t.push(e[a]+1),t.push(e[a]+10)):e[a]>90?(t.push(e[a]-1),t.push(e[a]+1),t.push(e[a]-10)):e%10===0?(t.push(e[a]+1),t.push(e[a]-10),t.push(e[a]+10)):(e[a]+1)%10===0?(t.push(e[a]-1),t.push(e[a]-10),t.push(e[a]+10)):(t.push(e[a]-1),t.push(e[a]+1),t.push(e[a]-10),t.push(e[a]+10));return t.every((function(e){return F.includes(e)}))&&(t=Je()),t},Ue=function(){if(Pe.length<2)return[];for(var e=[],t=0;t<Pe.length;t++)for(var a=0;a<Pe.length;a++)Pe[t]===Pe[a]+1&&(Pe[t]+1!==0&&e.push(Pe[t]+1),Pe[a]%10!==0&&e.push(Pe[a]-1)),Pe[t]===Pe[a]+10&&(Pe[t]+10<100&&e.push(Pe[t]+10),Pe[a]-10>=0&&e.push(Pe[a]-10));return console.log("preferredTargets: "+e),e},Ye=function(){y&&!I?B(!0):I&&Ze()},Fe=function(e,t){var a=e[0],r=e[e.length-1];if(r>=100||a%10>r%10)return!1;for(var o="Player"===t?T:te,c=function(t){if(o.some((function(a){return a.coords.includes(e[t])})))return{v:!1}},s=0;s<e.length;s++){var n=c(s);if("object"===typeof n)return n.v}return!0};Object(r.useEffect)((function(){C||(w<5?(G(p[w]),Ne("Place your ".concat(D.shipId,"!"))):(B(!0),L([]),Ne("Launch an attack!")))})),Object(r.useEffect)((function(){C&&!Z&&(te.length<=5?(ie(f[ce]),Qe()):$(!0))}));var Ke=function(){Qe()},Qe=function(){for(var e=le,t=Math.floor(98*Math.random()),a=[1,10][Math.floor(2*Math.random())],r=[t],o=1;o<le.size;o++)r.push(t+o*a);Fe(r,"Computer")?(ae((function(t){return[].concat(Object(n.a)(t),[e])})),e.coords=r,se((function(e){return parseInt(e+1)}))):Ke()},Xe=function(e){Ne("Game over! ".concat(e," wins!")),"Computer"===e&&(De.style.color="var(--alertRed)"),k(!0)},Ze=function(){window.location.reload(),De.style.color="var(--primary-light)"};return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(i,{}),Object(l.jsx)(b,{turn:a,startGame:Ye,text:Me,shipToPlace:D}),Object(l.jsxs)("div",{className:"boards-container",children:[Object(l.jsx)(h,{player:"Player",switchPlayer:Ge,currentPlayer:d,gameStarted:C,setBoardReady:g,setGameWon:k,shipToPlace:D,setShipToPlace:G,onHover:function(e){if(!C){var t=D,a=[e],r=ze?10:1;if(ze)for(var o=1;o<t.size;o++)a.push(parseInt(e)+parseInt(o*r));else for(var c=1;c<t.size&&(e+c)%10!==0;c++)a.push(parseInt(e)+parseInt(c*r));L(a)}},isHovering:J,placeShip:function(e){for(var t=D,a=ze?10:1,r=[e],o=1;o<t.size;o++)r.push(parseInt(e)+parseInt(o*a));if(Fe(r,"Player")){H((function(e){return[].concat(Object(n.a)(e),[t])})),t.coords=r;for(var c=0;c<r.length;c++){var s=r[c];document.getElementById("Player-".concat(s)).style.backgroundColor="var(--ship)"}A((function(e){return parseInt(e+1)}))}}}),C&&Object(l.jsx)(h,{player:"Computer",switchPlayer:Ge,currentPlayer:d,gameStarted:C,setBoardReady:g,setGameWon:k,cpuIsHovering:pe,onHover:function(e){Z&&fe([e])},cpuShips:te,setText:Ne,setCpuBoard:je,cpuBoard:ve,gameOver:Xe,gameWon:I})]}),Object(l.jsxs)("div",{className:"lower-container",children:[!C&&Object(l.jsxs)("button",{className:"orientation-button",onClick:function(){We("Vertical"===Re?"Horizontal":"Vertical"),Ee(!1===ze)},children:["Set ",Re]}),I&&Object(l.jsx)("button",{className:"orientation-button",onClick:Ye,children:"Play Again"})]})]})};s.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(m,{})}),document.getElementById("root"))},7:function(e,t,a){}},[[14,1,2]]]);
//# sourceMappingURL=main.ce7be95e.chunk.js.map